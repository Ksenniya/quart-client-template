Yes, moving some of the transformation or defaulting logic into the workflow function is a good idea. By handling these responsibilities in process_companies_search (or process_{entity_name} in general), you can reduce clutter in the endpoint and keep your controllers focused on request extraction and response formatting. For example, any pre-persistence validations, transformations, or enrichment (like setting defaults, timestamps, or additional flags) could be done in the workflow function. This separation makes it easier to test and reason about the business logic independently from the HTTP handling, leading to a more robust and maintainable codebase.