{"name": "report_processing_workflow", "description": "Workflow for processing a report which fetches conversion rates, builds report details, sends an email, and finalizes the report. The workflow allows for a failure branch if fetching conversion rates fails.", "transitions": [{"name": "fetch_conversion_rates", "description": "Start by fetching conversion rates.", "start_state": "None", "start_state_description": "Initial state before any processing", "end_state": "Fetching_Conversion_Rates", "end_state_description": "Conversion rates have been fetched (may contain errors)", "automated": true, "processes": {"schedule_transition_processors": [], "externalized_processors": [{"name": "process_fetch_conversion_rates", "description": "Fetches Bitcoin-to-USD and Bitcoin-to-EUR conversion rates.", "calculation_nodes_tags": "CHAT_ID_VAR", "attach_entity": true, "calculation_response_timeout_ms": "120000", "retry_policy": "NONE", "sync_process": false, "new_transaction_for_async": true, "none_transactional_for_async": false, "processor_criteria": {"externalized_criteria": [], "condition_criteria": []}}]}, "transition_criteria": {"externalized_criteria": [], "condition_criteria": []}}, {"name": "conversion_rates_failure", "description": "Handle failure if conversion rates could not be fetched.", "start_state": "Fetching_Conversion_Rates", "start_state_description": "State after attempting to fetch conversion rates", "end_state": "Failure", "end_state_description": "Processing failed due to conversion rates error", "automated": true, "processes": {"schedule_transition_processors": [], "externalized_processors": []}, "transition_criteria": {"externalized_criteria": [], "condition_criteria": []}}, {"name": "build_report", "description": "Build report details if conversion rates fetch is successful.", "start_state": "Fetching_Conversion_Rates", "start_state_description": "State after a successful conversion rates fetch", "end_state": "Report_Build_Completed", "end_state_description": "Report details have been built", "automated": true, "processes": {"schedule_transition_processors": [], "externalized_processors": [{"name": "process_build_report_details", "description": "Constructs report details based on fetched conversion rates and other entity data.", "calculation_nodes_tags": "CHAT_ID_VAR", "attach_entity": true, "calculation_response_timeout_ms": "120000", "retry_policy": "NONE", "sync_process": false, "new_transaction_for_async": true, "none_transactional_for_async": false, "processor_criteria": {"externalized_criteria": [], "condition_criteria": []}}]}, "transition_criteria": {"externalized_criteria": [], "condition_criteria": []}}, {"name": "send_email", "description": "Send an email with the constructed report details.", "start_state": "Report_Build_Completed", "start_state_description": "State after report details have been built", "end_state": "Sending_Email", "end_state_description": "Email sending process has been initiated", "automated": true, "processes": {"schedule_transition_processors": [], "externalized_processors": [{"name": "process_send_email", "description": "Sends email with the report details and updates the report status.", "calculation_nodes_tags": "CHAT_ID_VAR", "attach_entity": true, "calculation_response_timeout_ms": "120000", "retry_policy": "NONE", "sync_process": false, "new_transaction_for_async": true, "none_transactional_for_async": false, "processor_criteria": {"externalized_criteria": [], "condition_criteria": []}}]}, "transition_criteria": {"externalized_criteria": [], "condition_criteria": []}}, {"name": "complete_report", "description": "Finalize the report processing workflow.", "start_state": "Sending_Email", "start_state_description": "State after email has been sent", "end_state": "Completed", "end_state_description": "Report processing workflow is completed", "automated": true, "processes": {"schedule_transition_processors": [], "externalized_processors": []}, "transition_criteria": {"externalized_criteria": [], "condition_criteria": []}}], "workflow_criteria": {"externalized_criteria": [], "condition_criteria": [{"name": "ENTITY_MODEL_VAR:ENTITY_VERSION_VAR:CHAT_ID_VAR", "description": "Workflow criteria", "condition": {"group_condition_operator": "AND", "conditions": [{"field_name": "entityModelName", "is_meta_field": true, "operation": "equals", "value": "ENTITY_MODEL_VAR", "value_type": "strings"}, {"field_name": "entityModelVersion", "is_meta_field": true, "operation": "equals", "value": "ENTITY_VERSION_VAR", "value_type": "strings"}]}}]}}