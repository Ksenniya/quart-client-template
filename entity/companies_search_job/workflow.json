{"name": "companies_search_job_workflow", "description": "FSM workflow for companies_search_job that orchestrates fetching, filtering, enriching companies, and completing the job", "transitions": [{"name": "fetch_companies_transition", "description": "Fetch companies from external API using process_fetch_companies", "start_state": "None", "start_state_description": "Initial state", "end_state": "Companies_Fetched", "end_state_description": "Companies have been fetched and stored in the entity", "automated": true, "processes": {"schedule_transition_processors": [], "externalized_processors": [{"name": "process_fetch_companies", "description": "Fetch companies based on search parameters from the entity", "calculation_nodes_tags": "CHAT_ID_VAR", "attach_entity": true, "calculation_response_timeout_ms": "120000", "retry_policy": "NONE", "sync_process": false, "new_transaction_for_async": true, "none_transactional_for_async": false, "processor_criteria": {"externalized_criteria": [], "condition_criteria": []}}]}, "transition_criteria": {"externalized_criteria": [], "condition_criteria": []}}, {"name": "filter_active_companies_transition", "description": "Filter the fetched companies to select only active ones using process_filter_active_companies", "start_state": "Companies_Fetched", "start_state_description": "Companies have been fetched", "end_state": "Active_Companies_Filtered", "end_state_description": "Active companies have been filtered and stored in the entity", "automated": true, "processes": {"schedule_transition_processors": [], "externalized_processors": [{"name": "process_filter_active_companies", "description": "Filter out inactive companies from the fetched list", "calculation_nodes_tags": "CHAT_ID_VAR", "attach_entity": true, "calculation_response_timeout_ms": "120000", "retry_policy": "NONE", "sync_process": false, "new_transaction_for_async": true, "none_transactional_for_async": false, "processor_criteria": {"externalized_criteria": [], "condition_criteria": []}}]}, "transition_criteria": {"externalized_criteria": [], "condition_criteria": []}}, {"name": "enrich_companies_transition", "description": "Enrich active companies with LEI data using process_enrich_companies", "start_state": "Active_Companies_Filtered", "start_state_description": "Active companies have been filtered", "end_state": "Companies_Enriched", "end_state_description": "Companies have been enriched with LEI information in the entity", "automated": true, "processes": {"schedule_transition_processors": [], "externalized_processors": [{"name": "process_enrich_companies", "description": "Enrich each active company with its Legal Entity Identifier (LEI)", "calculation_nodes_tags": "CHAT_ID_VAR", "attach_entity": true, "calculation_response_timeout_ms": "120000", "retry_policy": "NONE", "sync_process": false, "new_transaction_for_async": true, "none_transactional_for_async": false, "processor_criteria": {"externalized_criteria": [], "condition_criteria": []}}]}, "transition_criteria": {"externalized_criteria": [], "condition_criteria": []}}, {"name": "complete_job_transition", "description": "Mark the job as completed using process_complete_job", "start_state": "Companies_Enriched", "start_state_description": "Companies have been enriched", "end_state": "Job_Completed", "end_state_description": "Job has been completed with final status and results stored in the entity", "automated": true, "processes": {"schedule_transition_processors": [], "externalized_processors": [{"name": "process_complete_job", "description": "Set job status to completed and add completion timestamp and results", "calculation_nodes_tags": "CHAT_ID_VAR", "attach_entity": true, "calculation_response_timeout_ms": "120000", "retry_policy": "NONE", "sync_process": false, "new_transaction_for_async": true, "none_transactional_for_async": false, "processor_criteria": {"externalized_criteria": [], "condition_criteria": []}}]}, "transition_criteria": {"externalized_criteria": [], "condition_criteria": []}}], "workflow_criteria": {"externalized_criteria": [], "condition_criteria": [{"name": "ENTITY_MODEL_VAR:ENTITY_VERSION_VAR:CHAT_ID_VAR", "description": "Workflow criteria", "condition": {"group_condition_operator": "AND", "conditions": [{"field_name": "entityModelName", "is_meta_field": true, "operation": "equals", "value": "ENTITY_MODEL_VAR", "value_type": "strings"}, {"field_name": "entityModelVersion", "is_meta_field": true, "operation": "equals", "value": "ENTITY_VERSION_VAR", "value_type": "strings"}]}}]}}